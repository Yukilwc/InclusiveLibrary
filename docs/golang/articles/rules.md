# 经验规则

定义struct后，可提供一个New函数，提供给外部一个便捷的获取实例的方法，
此方法总是对struct进行初始化并返回其指针。

在go中，方法名前面的Must一般表示该方法不会返回错误，而是直接panic或者退出程序。和没有Must的方法相比，
它们更适合用于初始化或者配置的场景，不需要处理错误返回值。
例如，MustNewServer方法1是NewServer方法的一个包装，它接受一个RestConf和一些RunOption作为参数，返回一个Server对象。
如果NewServer方法返回错误，MustNewServer方法会直接调用log.Fatal打印错误并退出程序。
所以，MustNewServer方法不会返回错误，只会返回一个Server对象或者终止程序。

## 关于零值问题

当你使用 var a []int 定义一个数组时，其实得到的是一个指向数组的指针。 所以可以使用 变量 != nil 来判断数组是否为空。也可以判断它的长度、或者容量是否为0 len(数组变量或者切片变量) == 0、cap(数组变量或者切片变量) == 0。

## go的初始化

您的问题是关于在go里一般都是哪些情景用哪些初始化方式。

根据我的搜索结果，我为您找到了一些相关的信息和链接：

在go语言中，有多种变量声明和初始化的方法，包括var, :=, new和make123。
var可以用于任何类型，它声明一个变量，并指定其类型，如果没有给定初始值，则使用类型的零值123。例如：var i int // i的值为0
:=是短变量声明，它可以根据给定的初始值自动推断变量的类型，并返回该类型本身123。例如：i := 10 // i的类型为int
new可以用于任何类型，它分配一块内存，并返回一个指向该内存地址的指针，该内存地址存储该类型的零值123。例如：p := new(int) // p是一个指向int零值的指针
make只能用于slice, map和chan这三种引用类型，它分配并初始化一个对象，并返回该对象本身123。例如：s := make([]int, 10) // s是一个长度为10的int切片
在go语言中，一般有以下几个原则来选择合适的初始化方式123:
使用make来初始化slice, map和chan，因为这三种类型需要初始化后才能使用。
使用var来声明变量，并指定其类型，如果需要显示地使用类型的零值或者指定初始值。
使用:=来声明并初始化变量，如果不需要显示地指定类型或者使用零值。
避免使用new，除非需要一个指向类型零值的指针。