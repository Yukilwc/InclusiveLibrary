# 卷

如果宿主机和容器都有node_modules文件夹，那么设置volumes挂载node_modules会有以下几种情况：

* 如果你使用了匿名卷，例如"/app/node_modules"，那么容器内的node_modules会覆盖宿主机的node_modules，这可能会导致依赖不一致或者缺失
* 如果你使用了命名卷，例如"node_modules:/app/node_modules"，那么容器内的node_modules会被复制到宿主机的一个特定位置，然后再挂载到容器内，这可能会导致性能下降或者空间占用
* 如果你使用了本地卷，例如".:/app"，那么宿主机的node_modules会覆盖容器内的node_modules，这可能会导致架构不兼容或者版本冲突

## 关于挂载卷时的同步问题

According to the Docker documentation1, volumes are the preferred mechanism for persisting data generated by and used by Docker containers. Volumes are completely managed by Docker and are independent of the host machine’s directory structure and OS. When you mount a volume, you can specify a source and a destination for the mount. The source can be a named volume or an anonymous volume. The destination is the path where the volume is mounted in the container.

If you use a named volume, you can create it beforehand using docker volume create command, or let Docker create it on demand when you mount it. If you use an anonymous volume, you omit the source field and Docker creates a new volume with a random name.

When you mount a volume, Docker copies the content of the source to the destination if the destination is empty. If the destination already has some content, Docker preserves it and does not overwrite it with the source content. This means that if you mount a volume to a container that already has some data in the destination path, you will not lose that data.

However, if you use a bind mount instead of a volume, Docker does not copy any content from the source to the destination. A bind mount is when you mount a file or directory on the host machine into a container using its absolute path on the host machine. Bind mounts are dependent on the host machine’s filesystem and are less portable than volumes. When you use a bind mount, Docker mounts the host file or directory into the container as-is, and any changes made to the host file or directory are reflected in the container, and vice versa. This means that if you mount a bind mount to a container that already has some data in the destination path, you will lose that data because it will be hidden by the bind mount.

So, to answer your question, when you mount a volume, Docker will not cover the container content using host content, unless the container content is empty. But when you mount a bind mount, Docker will always cover the container content using host content.

可以发现，挂载本地时，容器内容是会被本地覆盖的。