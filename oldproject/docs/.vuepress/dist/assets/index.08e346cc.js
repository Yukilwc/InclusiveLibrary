import{f as R,I as m,p as N,R as M,o as x,c as p,a as f,F as T,l as W,S as $,h as g,v as q,$ as O,_ as H,r as V,b,w as y,d as E,a0 as D,a1 as U,a3 as j}from"./app.59b4e306.js";var G="/InclusiveLibrary/assets/0.6a3a9c7d.png",J="/InclusiveLibrary/assets/1.3372de71.png",K="/InclusiveLibrary/assets/2.d3319d67.png",Q="/InclusiveLibrary/assets/3.c21dccc7.png",Y="/InclusiveLibrary/assets/4.01bec389.png",Z="/InclusiveLibrary/assets/5.c10cb8eb.png",S=Object.defineProperty,z=(t,e,a)=>e in t?S(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a,c=(t,e,a)=>(z(t,typeof e!="symbol"?e+"":e,a),a);const ee=(t,e,a,i)=>{const s=()=>{if(e.value.offsetPx>0)console.log("==========offsetAnimate"),l();else if(e.value.offsetPx==0)console.log("==========restartAnimate"),r();else throw new Error("offset cannot be less than zero")},l=()=>{setTimeout(()=>{i.value?(t.value.transition=`transform ${a.value*(e.value.offsetPx/e.value.itemWidth)}ms linear`,t.value.transform=`translateX(${e.value.offsetPx}px)`):(t.value.transition=`transform ${a.value*(e.value.offsetPx/e.value.itemWidth)}ms linear`,t.value.transform=`translateX(-${e.value.offsetPx}px)`)},0)},r=async()=>{setTimeout(()=>{i.value?(t.value.transition=`transform ${a.value}ms linear`,t.value.transform=`translateX(${e.value.offsetPx+e.value.itemWidth}px)`):(t.value.transition=`transform ${a.value}ms linear`,t.value.transform=`translateX(-${e.value.offsetPx+e.value.itemWidth}px)`)},0)};return{start:s,offsetAnimate:l,restartAnimate:r,toOrigin:()=>{i.value?(t.value.transition="transform 0ms linear",t.value.transform=`translateX(${e.value.offsetPx}px)`):(t.value.transition="transform 0ms linear",t.value.transform=`translateX(-${e.value.offsetPx}px)`)}}};class P{constructor(){c(this,"x0",0),c(this,"x1",300),c(this,"totalTime",3e3),c(this,"x",0),c(this,"currentTime",0),c(this,"startTime"),c(this,"isActive",!1),c(this,"callback",e=>{}),c(this,"animate",async()=>(this.isActive=!0,new Promise(async(e,a)=>{const i=async s=>{if(this.isActive===!1){console.log("==========FPSAnimate is set isAnimating finished"),a(this.x);return}this.startTime===void 0&&(this.startTime=s);const r=(s-this.startTime)/this.totalTime;this.x=Math.round(this.x0+(this.x1-this.x0)*r),Math.abs(this.x-this.x0)>=Math.abs(this.x1-this.x0)?(this.x=this.x1,this.callback(this.x),e(this.x)):(this.callback(this.x),window.requestAnimationFrame(i))};window.requestAnimationFrame(i)}))),c(this,"init",({x0:e=0,x1:a=300,totalTime:i=3e3,x:s=0,currentTime:l=0,startTime:r=void 0})=>{this.x0=e,this.x1=a,this.totalTime=i,this.x=s,this.currentTime=l,this.startTime=r})}}c(P,"getFrameTime",async()=>(console.log("==========getFrameTime start"),new Promise((t,e)=>{window.requestAnimationFrame(a=>{window.requestAnimationFrame(i=>{t(i-a)})})})));let o=new P;const te=(t,e,a,i)=>{const s=async()=>{o.isActive&&(o.isActive=!1),o=new P,o.init({x0:0,x1:-e.value.offsetPx,totalTime:a.value*(e.value.offsetPx/e.value.itemWidth)}),o.callback=n=>{t.value.transform=`translateX(${n}px)`},console.log("==========start ani",o);try{await o.animate()}catch(n){console.log("==========\u52A8\u753B\u5F3A\u5236\u505C\u6B62",n);return}console.log("==========end ani"),l()},l=async()=>{o.init({x0:-e.value.offsetPx,x1:-e.value.offsetPx-e.value.itemWidth,totalTime:a.value}),o.callback=n=>{t.value.transform=`translateX(${n}px)`};try{await o.animate()}catch(n){console.log("==========\u52A8\u753B\u5F3A\u5236\u505C\u6B62",n);return}l()};return{start:s,pause:async n=>{if(console.log("==========pause fps animate",n),o.isActive=!1,n){console.log("==========",o.x);return}console.log("==========pause\u7ED3\u675F\u6682\u505C");let u=o.x;o=new P;let v=1-Math.abs(u)/(e.value.offsetPx+e.value.itemWidth);console.log("==========ratio",v),o.init({x0:u,x1:-e.value.offsetPx-e.value.itemWidth,totalTime:a.value*v}),o.callback=d=>{t.value.transform=`translateX(${d}px)`},console.log("==========start ani",o);try{await o.animate()}catch(d){console.log("==========\u52A8\u753B\u5F3A\u5236\u505C\u6B62",d);return}console.log("==========end ani"),l()}}},ae=(t,e,a)=>{const i=m({transition:"",transform:"",left:t.value,right:"",width:""}),s=m({containerHeight:0,wrapperWidth:0,containerWidth:0,itemWidth:0,offsetPx:0}),l=async(n,u)=>{if(!n.value||!u.value)return;r(),await O(),s.value.containerWidth=n.value.getBoundingClientRect().width,s.value.containerHeight=u.value.getBoundingClientRect().height;let v=u.value.querySelector(".misaka-carousel-item");s.value.itemWidth=v.getBoundingClientRect().width,s.value.wrapperWidth=s.value.itemWidth*(e.value+1),i.value.width=`${s.value.wrapperWidth}px`,s.value.offsetPx=u.value.offsetLeft,console.log("==========wrapper.value.offsetLeft",u.value.offsetLeft),i.value.left=a.value?"":`${s.value.offsetPx}px`,i.value.right=a.value?`${s.value.offsetPx}px`:""},r=()=>{i.value={transition:"",transform:"",left:t.value,right:"",width:""}};return{wrapperStyle:i,calcAllSize:l,resetWrapperStyle:r,computedSize:s}};var se=(t,e)=>{const a=t.__vccOpts||t;for(const[i,s]of e)a[i]=s;return a};const ie=R({__name:"index",props:{additionalSlides:{type:Number,default:3},itemRight:{type:String,default:"0px"},speed:{type:Number,default:3e3},offset:{type:String,default:"0px"},reverse:{type:Boolean,default:!1},mode:{type:String,default:"css"}},setup(t,{expose:e}){const a=t,i=m(),s=m(),{additionalSlides:l,itemRight:r,speed:n,offset:u,reverse:v,mode:d}=N(a),{wrapperStyle:h,calcAllSize:I,computedSize:B}=ae(u,l,v),A=ee(h,B,n,v),k=te(h,B,n),w=m(!1);M(async()=>{C()});const C=async()=>{w.value=!1,await I(i,s),console.log("==========size",B.value),w.value=!0,d.value==="css"?(console.log("==========css mode"),A.start()):(console.log("==========fps mode"),k.start())},L=_=>{console.log("==========end handle ",_),d.value==="css"&&_.propertyName==="transform"&&(console.log("\u91CD\u542F"),A.toOrigin(),A.restartAnimate())};return e({start:C,pause:_=>{k.pause(_)}}),(_,xe)=>(x(),p("div",{class:"misaka-carousel-container",ref_key:"container",ref:i,style:$([{opacity:w.value?"1":"0"},{height:`${g(B).containerHeight}px`}])},[f("div",{style:$(g(h)),class:"misaka-carousel-wrapper",ref_key:"wrapper",ref:s,onTransitionend:L},[(x(!0),p(T,null,W(g(l)+1,(pe,X)=>(x(),p("div",{class:"misaka-carousel-item",key:X,style:$([{paddingRight:`${g(r)}`}])},[q(_.$slots,"default",{},void 0,!0)],4))),128))],36)],4))}});var F=se(ie,[["__scopeId","data-v-df0a0afa"]]);const ne=t=>(D("data-v-db2cd588"),t=t(),U(),t),oe={class:""},le=E("start"),re=E("Pause"),ue={class:"carousel-container"},ce={class:"carousel-wrapper"},fe=ne(()=>f("div",{class:"mt10"},"\u5E38\u89C4\u65B9\u5411",-1)),ve={class:"comp-container"},de={class:"comp-container"},me={class:"image-list"},he=["src"],_e=R({name:"index",setup(t){const e=n=>new URL({"../images/0.png":G,"../images/1.png":J,"../images/2.png":K,"../images/3.png":Q,"../images/4.png":Y,"../images/5.png":Z}[`../images/${n}.png`],self.location).href,a=m(null),i=()=>{console.log("==========carouselRef1",j(a)),a.value.start()},s=m(!1),l=()=>{s.value=!s.value,a.value.pause(s.value)},r=()=>{console.log("==========textClick")};return(n,u)=>{const v=V("el-button");return x(),p(T,null,[f("div",oe,[b(v,{onClick:i},{default:y(()=>[le]),_:1}),b(v,{onClick:l},{default:y(()=>[re]),_:1})]),f("div",ue,[f("div",ce,[fe,f("div",ve,[b(g(F),{ref_key:"carouselRef1",ref:a,additionalSlides:2,itemRight:"20px",speed:1e4,offset:"300px",reverse:!1,mode:"fps"},{default:y(()=>[f("div",{class:"",onClick:r},"\u4E00\u6BB5\u6587\u5B57\u4E00\u6BB5\u6587\u5B57\u4E00\u6BB5\u6587\u5B57\u4E00\u6BB5\u6587\u5B57\u4E00\u6BB5\u6587\u5B57\u4E00\u6BB5\u6587\u5B57\u4E00\u6BB5\u6587\u5B57\u4E00\u6BB5\u6587\u5B57\u4E00\u6BB5\u6587\u5B572233")]),_:1},512)]),f("div",de,[b(g(F),{ref:"carouselRef2",additionalSlides:2,itemRight:"20px",speed:1e4,mode:"fps"},{default:y(()=>[f("div",me,[(x(),p(T,null,W(6,(d,h)=>f("div",{class:"item",key:h},[f("img",{class:"image ignore-zoom",src:e(h)},null,8,he)])),64))])]),_:1},512)])])])],64)}}});var be=H(_e,[["__scopeId","data-v-db2cd588"],["__file","index.vue"]]);export{be as default};
